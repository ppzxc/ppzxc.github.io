---
type: post
date: 2022-02-04 12:00:00
title: 2022-02-04 독서 일지
draft: false
author: ppzxc
tags:
  - '일지'
  - 'Clean Code'
---

# 경계
- 아직 존재하지 않는 코드를 사용하기

## 깨끗한 경계

# 단위 테스트 (Unit Test)
## TDD의 세 가지 법칙
1. 실패하는 단위 테스트를 작성할 때까지 실제 코드를 작성하지 않는다.
2. 컴파일은 실패하지 않으면서 실행이 실패하는 정도로만 단위 테스트를 작성한다.
3. 현재 실패하는 테스트를 통과할 정도로만 실제 코드를 작성한다.

## 관리 문제
- 위와 같이 개발을 진행하면 매일 수십 개, 수백 개, 수천 개에 달하는 테스트 케이스가 나온다
- 실제 코드 양과 맞먹는 테스트 코드는 심각한 관리 문제를 유발하기도 한다.

## 깨끗한 테스트 코드 유지하기
- 그저 코드를 테스트 할 수 있는 지저분한 테스트 코드는 있으나 마나, 더 못할 수도 있다.

## 테스트는 유연성, 유지 보수성, 재사용성을 제공한다.
- 실제 코드를 점검하는 자동화된 단위 테스트는 설계와 아키텍처를 최대한 깨끗하게 보존하는 열쇠다.

```
테스트 코드가 지저분하면 

1. 코드를 변경하는 능력이 떨어진다.
2. 코드 구조를 개선하는 능력도 떨어진다.

테스트 코드가 지저분할 수록 실제 코드도 지저분해진다.
결국 테스트 코드를 잃어버리고 실제 코드도 망가진다.

```

## 깨끗한 테스트 코드
- 깨끗한 테스트 코드를 만들려면 '가독성', '가독성', '가독성' 세가지가 필요하다.
- 가독성은 명료성, 단순성, 풍부한 표현력이 필요하다.

## 한개의 테스트 코드에는 단일 assert 문을 사용하라
- 단 필요하다면 assert문을 여러개 사용해도 괜찮다.
- 다만 assert문은 최소한으로 유지하는게 좋다.

## 테스트 당 개념 하나
- 테스트 함수마다 한 개념만 테스트하라

## 개념 당 assert문 수를 최소로 줄여라
## 테스트 함수 하나는 개념 하나만 테스트하라

## F.I.R.S.T
- 깨끗한 테스트는 다음 다섯가지 규칙을 따른다.
### FAST, 빠르게
- 테스트는 빨라야한다.

### Independent, 독립적이어야한다
- 각 테스트는 서로 의존하면 안된다.

### Repeatable, 반복가능하게
- 테스트는 어떠한 환경에서도 반복 가능해야 한다.
- 실제 환경, QA 환경, 버스안 노트북에서, 네트워크가 연결되어 있지 않더라도

### Self-Validation, 자가 검증해야한다.
- 테스트는 bool 값으로 결과를 내야 한다.
- 결과는 성공 아니면 실패다.
- 테스트가 스스로 성공과 실패를 가늠하지 않으면, 테스트가 아니다.

### Timely, 적시에
- 테스트는 적시에 작성해야 한다.
- 단위 테스트는 테스트 하려는 실제 코드를 구현하기 직전에 구현한다.
- 실제 코드를 구현한 다음에는 테스트 코드를 작성하기 힘들다.

# Class, 클래스
## 클래스 체계
- 클래스는 변수 목록이 가장 먼저 나온다.
- static, public, private 변수가 나오며 이어서 비공개 인스턴스 변수가 나온다.
- 이 다음에는 공개 함수가 나오며, 이어서 비공개 함수가 나온다.
- 즉 추상화 단계가 순서대로 내려간다. 그래서 프로그램은 신문 기사처럼 읽힌다.

## 캡슐화
- 캡슐화를 풀어주는 결정은 언제나 최후의 수단이다.

## 클래스는 작아야 한다.
- 메서드가 다섯개 이더라도, 작다의 기준은 해당 클래스의 책임이 기준이 되어야 한다.
- 그리고 클래스 이름은 해당 클래스의 책임을 기술하며, 클래스 작명은 클래스 크기를 줄이는 첫 번째 관문이다.
- 클래스 이름이 모호하다면 필시 클래스 크기가 너무 커서 그렇다.
- 클래스 이름이 모호하다면 필시 클래스 책임이 너무 많아서 그렇다.

```
예를 들어 클래스 이름에 processor, manager, super 등과 같은 모호한 단어가 있다면 클래스에 여러 책임을 떠안겼다는 증거이다.
```

## SPR (Simple Responsibility Principle), 단일 책임 원칙
- 클래스나 모듈을 변경할 이유가 하나, 단 하나뿐이어야 한다는 원칙이다.
- 클래스는 책임, 즉 변경할 이유가 하나여야 한다.

### SRP는 객체 지향 설계에서 이해하기 쉽고 지켜지기 수월하지만, 클래스 설계자가 가장 무시하는 규칙중 하나다.
### 소프트웨어를 돌아가게 만드는 활동과 소프트웨어를 깨끗하게 만드는 활동은 완전히 별개이다.

## Cohession, 응집도
### 클래스는 인스턴스 변수 수가 작아야 한다. 

# reference
- 로버트 C. 마틴 지음, 박재호·이해영 옮김 『 Clean Code 』, 프로그램 프로그래밍 프로그래머, 인용.
